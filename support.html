<!-- $Id: support.html,v 9d6266d38796 2003/03/16 12:15:05 simon $ -->
<html>
<head>
<title>ColdFrame: Specially written support components</title>
</head>
<body bgcolor="white">
<h1>ColdFrame: Specially written support components</h1>

<ul>

<li><a href="#library">Library components</a>

<li><a href="#project">Supplied Project components</a>

<li><a href="#signatures">Signature packages</a>

</ul>

<h2><a name="library">Library components</a></h2>

<p>Specially written support components appear under the top-level
package <tt>ColdFrame</tt>. The more user-interesting ones are

<dl>

<dt><tt>ColdFrame.Callbacks</tt>

<dd>Provides callback (Observer) support.

<dt><tt>ColdFrame.Events_G</tt>

<dd>Standard support for <a href="events.html">Events</a>. This is a
basic generic event management specification; the time aspects are
provided using <tt>ColdFrame.Time_Signature</tt>. Child packages are

<dl>

<dt><tt>ColdFrame.Events_G.Creation_G</tt>

<dd>Provides a "creation" event type, for use where there's no
application event to cause transition from the initial state.

<dt><tt>ColdFrame.Events_G.Debug_G</tt>

<dd>Adds logging (to standard output) to a concrete
<tt>ColdFrame.Events_G.Event_Queue</tt>.

<dt><tt>ColdFrame.Events_G.Standard_G</tt>

<dd>A straightforward event queueing and dispatching service.

<dt><tt>ColdFrame.Events_G.Test_G</tt>

<dd>Adds unit test support to a concrete
<tt>ColdFrame.Events_G.Event_Queue</tt>. The additional features are

<ul>

<li>inspection of Timers; is a time set, when would it expire?

<li>the event queue doesn't start until told.

</ul>

</dl>

<dt><tt>ColdFrame.Exceptions</tt>

<dd>Provides exceptions.

<dl>

<dt><tt>ColdFrame.Exceptions.Message</tt>

<dd>Provides exception reporting (to standard output).

<dt><tt>ColdFrame.Exceptions.Symbolic_Traceback</tt>

<dd>Enables GNAT's exception traceback facility, which is set up to
report unhandled exceptions both in the main program and in tasks. To
use it (only in host-is-target environments; won't work in VxWorks),
you must

<ol>
<li><tt>with</tt> this package,
<li>give the switch <tt>-E</tt> to the binder.
</ol>

<dt><tt>ColdFrame.Exceptions.Traceback</tt>

<dd>Enables GNAT's exception traceback facility, which is set up to
report unhandled exceptions both in the main program and in tasks.

<br>This version produces the traceback in hexadecimal form; use
<tt>addr2line</tt> to convert to a readable form.

<br>To use it, you must

<ol>
<li><tt>with</tt> this package,
<li>give the switch <tt>-E</tt> to the binder.
</ol>

</dl>

<dt><tt>ColdFrame.Hash</tt>

<dd>A family of hash functions, suitable for use as hashes (or part of
hashes) for instantiating <a href="use-of-bcs.html">Booch Map
containers</a>.

<dl>

<dt><tt>ColdFrame.Hash.Access_Hash</tt>

<dd>A hash function for access values (useful for associative classes).

<dt><tt>ColdFrame.Hash.Instance_Access_Hash</tt>

<dd>A hash function for access-to-instance values (useful for child
classes).

<dt><tt>ColdFrame.Hash.Strings</tt>

<dd>A family of hash functions for strings.

<dl>

<dt><tt>ColdFrame.Hash.Strings.Bounded</tt>

<dd>A hash function for Bounded Strings.

<dt><tt>ColdFrame.Hash.Strings.Standard</tt>

<dd>A hash function for standard Strings.

<dt><tt>ColdFrame.Hash.Strings.Unbounded</tt>

<dd>A hash function for Unbounded Strings.

</dl>

</dl>

<dt><tt>ColdFrame.Instances</tt>

<dd>Provides a type from which all Instances are derived.

<br>The purpose is to allow mutual visibility (to support associations
and inheritance relationships) without using non-standard extensions
such as <i>WITH TYPE</i>.

<dt><tt>ColdFrame.Interrupts</tt>

<dd>Provides support for (simple) interrupt handling.

</dl>

<h2><a name="project">Supplied Project components</a></h2>

<p>For some purposes, ColdFrame generates code expecting certain
services to be provided by specific packages (under
<tt>ColdFrame.Project</tt>), where you would probably prefer to be
able to provide your own version.

<p>In these cases, sample implementations are provided. The support
code above is distributed in the directory
<tt>cf-<i>yyyymmdd</i>/lib</tt>, while the sample project code below
is under <tt>cf-<i>yyyymmdd</i>/project</tt>.

<dl>

<dt><tt>ColdFrame.Project.Calendar</tt>

<dd><tt>ColdFrame.Project.Calendar.Time</tt> is used as the
translation for <i>Date</i>, <i>Time</i> attributes.

<br>The provided default contains renamings of
<tt>Ada.Calendar.Time</tt> and <tt>Ada.Calendar.Clock</tt>, and an
<tt>Image</tt> function used in serialization support.

<dt><tt>ColdFrame.Project.Events</tt>

<dd>A standard instantiation of <tt>ColdFrame.Events_G</tt>, with time
support from <tt>ColdFrame.Project.Times</tt>, logging from
<tt>ColdFrame.Project.Logging_Support</tt>, and storage from
<tt>ColdFrame.Project.Global_Storage_Pool</tt>.

<br>Three concrete instantiations are provided:
<dl>

<dt><tt>ColdFrame.Project.Events.Standard</tt>

<dd>A standard instantiation of
<tt>ColdFrame.Events_G.Standard_G</tt>, with held events from
<tt>ColdFrame.Project.Held_Event_Support</tt>.

<dt><tt>ColdFrame.Project.Events.Standard.Debug</tt>

<dd>A standard instantiation of
<tt>ColdFrame.Events_G.Debug_G</tt>, based on
<tt>ColdFrame.Project.Events.Standard</tt>.

<dt><tt>ColdFrame.Project.Events.Standard.Test</tt>

<dd>A standard instantiation of
<tt>ColdFrame.Events_G.Test_G</tt>, based on
<tt>ColdFrame.Project.Events.Standard</tt>.

<dt><tt>ColdFrame.Project.Events.Standard.Test_Debug</tt>

<dd>A standard instantiation of
<tt>ColdFrame.Events_G.Test_G</tt>, based on
<tt>ColdFrame.Project.Events.Standard.Debug</tt> (ie, a Test queue,
which prints what's going on)..

</dl>

<dt><tt>ColdFrame.Project.Events.Creation</tt>

<dd>A standard instantiation of
<tt>ColdFrame.Events_G.Creation_G</tt>.

<dt><tt>ColdFrame.Project.Global_Storage_Pool</tt>

<dd>Provides a (GNAT-specific) Storage Pool type and instance, using
the standard system <tt>malloc</tt> pool, suitable for instantiating
<a href="use-of-bcs.html">Booch Containers</a>.

<br>You may find <tt>GNAT.Debug_Pools</tt> useful!

<dt><tt>ColdFrame.Project.Serialization</tt>

<dd>Provides support for <i>serializable</i> types; renames
<tt>ColdFrame.Serialization</tt>,

</dl>

<h2><a name="signatures">Signature packages</a></h2>

<p>To help make sure that the packages you supply provide all the
facilities needed, there are <a
href="http://www.adapower.com/rationale/rat95-p2-12.html">signature
packages</a>:

<dl>

<dt><tt>ColdFrame.Project.Events.Held_Event_Queue_Signature</tt>

<dd>Specifies how "held events" (events posted to fire at some later
time) are stored.

<dt><tt>ColdFrame.Logging_Signature</tt>

<dd>Specifies how error reports are logged.

<dt><tt>ColdFrame.Time_Signature</tt>

<dd>Specifies how time behaves.

</dl>

<p><hr>
<i>
<address>
<a href="mailto:simon@pushface.org">Simon Wright</a>
</address>
<script>
document.write("Last update: ");
document.write(document.lastModified);
</script>
</i></body>
</html>
