<!-- $Id: extraction.html,v b4047853fe30 2002/11/14 21:37:25 simon $ -->
<html>
<head>
<title>ColdFrame: Extraction of models from Rose</title>
</head>
<body bgcolor="white">
<h1>ColdFrame: Extraction of models from Rose</h1>

<p>The Rose model is extracted to a raw "domain definition file" (type
<tt>.raw</tt>) using a RoseScript script <tt>extractor.ebs</tt>.

<p>Because <tt>extractor.ebs</tt> may change in future releases of
ColdFrame, an intermediate script <tt>extractor-trampoline.ebs</tt> is
provided, which uses environment variables <tt>TOP</tt> and
<tt>COLDFRAME</tt> (typically set to <tt>C:</tt> and
<tt>cf-<i>yyyymmdd</i></tt> respectively, see the <a
href="installation.html">installation notes</a>) to locate
<tt>extractor.ebs</tt>.

<p>Copy <tt>extractor-trampoline.ebs</tt> to the Rose script
directory (typically <tt>C:\Program&nbsp;Files\Rational\Rose\</tt>).

<p>Call <tt>extractor-trampoline.ebs</tt> from the Rose <i>Add-ins</i>
menu (or whichever other one you want to use). In
<tt>C:\Program&nbsp;Files\Rational\Rose\</tt> or thereabouts, edit
<tt>rose.mnu</tt>:

<blockquote>
<pre>
Menu Add-Ins
{
  Separator

  option "Generate &XML..."	
   {
	RoseScript extractor-trampoline.ebs
   }

}
</pre>
</blockquote>

<p>The Extractor extracts data for the selected Domain packages or, if
none are selected, for all the packages on the current active class
diagram (if any). A recommended approach is to have a diagram (called
<i>Code Generation</i>, perhaps) and drag all the Domain packages in
your model onto it.

<p>You can select packages to be extracted in the Code Generation
diagram.

<p>The extracted domain definition file name is the domain name with
underscores substituted for spaces.

<p>You can specify the output file location using the environment or
Rose Path Map variable <tt>COLDFRAMEOUT</tt> (the Rose Path map
version takes precedence if both are defined). The default output file
location if <tt>COLDFRAMEOUT</tt> isn't specified is the directory
that <tt>extractor.ebs</tt> was loaded from (sorry about
that). Double-clicking on the <tt>.mdl</tt> file or using the "recent
documents" facility of Windows opens Rose with the correct default
directory.

<p>The output format is XML, using a Document Type Description (<a
href="ddf.dtd">DTD</a>) designed to be easy to output from RoseScript
and to handle in the next stage using a SAX-compliant parser.

<p><hr>
<i>
<address>
<a href="mailto:simon@pushface.org">Simon Wright</a>
</address>
<script>
document.write("Last update: ");
document.write(document.lastModified);
</script>
</i></body>
</html>
