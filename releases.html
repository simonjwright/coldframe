<!-- $Id: releases.html,v adfa8d901ac3 2001/09/28 19:24:00 simon $ -->
<html>
<head>
<title>ColdFrame: Releases</title>
</head>
<body bgcolor="#ffffff">
<h1>ColdFrame: Releases</h1>

<!-- Begin Mind It Box -->
<form method=POST action="http://minder.netmind.com/mindit.shtml">
<table border=0 cellpadding=5 cellspacing=0 bgcolor=#005599>
<tr><td align=center colspan=2>
<font face=arial,helvetica size=-1 color=#ffffff>
<b>Receive email when this page changes</b>
</td></tr><tr><td>
<input type=text value="Enter email address" name="EMAIL" size=20></td><td rowspan=2>
<input type="image" src="http://www.netmind.com/html/mindit.gif" border="0" width="76" height="28">
<br><font face=arial,helvetica size=-2 color=#ffffff><center>
<b>Click Here</td></tr>
<tr valign=top><td colspan=1 align=center>
<font face=arial,helvetica size=-2 color=#ffffff>•<b> Powered by Netmind </b>•
</td></tr></table></form>
<!-- End Mind It Box -->

<p>Source can be downloaded <a href="download/">here</a>.

<p>Archives are available in <tt>.zip</tt> or <tt>.tgz</tt>
(<tt>.tar.gz</tt>) form. The file name encodes the date of the
release: <tt>cf-20010130.zip</tt> is the zipped release of 30 January
2001.

<dl>

<dt>2001mmdd

<dd>To support testing with <a
href="http://www.adapower.com/reuse/aunit.html">AUnit</a>, a
<tt>Tear_Down</tt> child procedure is generated for each Class, which
deletes all instances. This <em>won't</em> (31.viii.01) work for
&#171;active&#187; classes.

<br>A domain <tt>Tear_Down</tt> child procedure is also generated,
which calls all the class <tt>Tear_Down</tt>s.


<p><tt>normalize-rose.tcl</tt> supports the
<tt>--casing&nbsp;<i>file</i></tt> flag, which specifies a file
containing identifier case exceptions.

<br>A GLIDE case exception file can be used, but GLIDE's distinction
between partial and complete exceptions isn't preserved (you could
tell GLIDE to upcase <i>gnat</i> only when it formed the whole of an
identifier, so you'd get <tt>GNAT</tt> but <tt>Gnat_Id</tt>).

<br>You can specify more than one exception file by repeating
<tt>--casing</tt>.


<p>A child class' <tt>Create</tt> operation sets up the parents' child
information record.


<p>Deletion of an instance of a child class clears the parents' child
information record.


<p>Deletion of an instance of a parent class deletes the current child
instance.


<p>A parameterless instance procedure marked &#171;finalize&#187; is
called by <tt>Delete</tt> just before the instance is freed.


<p>Operations marked &#171;generated&#187; are treated as "already
generated", that is, no new code is generated for them.

<br>This is to allow the standard <tt>Create</tt>, <tt>Find</tt> and
<tt>Delete</tt> operations to be used on sequence diagrams without
Rose complaining.


<p>The supplied Makefiles, when placing generated code in
<tt><i>Domain</i>.gen</tt>, delete any <tt>.ad?</tt> files found in
<tt><i>Domain</i>.impl</tt>. This should reduce confusion (and may
make the use of GNAT Projects easier).


<p>(Record) types marked <tt>[[discriminated]]</tt> are generated as
discriminated records; the discriminant is an enumeration type with
literals formed from the attribute names with <tt>_T</tt> appended.


<p>A child generic procedure <tt><i>Domain.Class</i>.Iterate</tt> is
created for non-&#171;singleton&#187; classes to simplify iteration
over Collections.


<p>Storage management for the Booch Containers, where relevant, adopts
the new style (you need a version of the BCs later than 20010927).


<p>Generated <tt>Hash</tt> functions now compute a useful (I hope)
value.


<p>The supporting code for has functions has been reorganised under
<tt>ColdFrame.Hash</tt>.


<p>

<dt>20010819

<dd>The Domain <tt>Initialize</tt> procedure used to call an
<tt>Initialize</tt> procedure for each Class, for which a default
empty implementation was supplied. Now, it only calls operations with
the &#171;init&#187; stereotype (&#171;init&#187; implies
&#171;class&#187;). They should be parameterless procedures (a warning
is given, but code generation completes); a standard stub
implementation is provided, which raises <tt>Program_Error</tt>.


<p>ColdFrame used to use &#171;interface&#187; to indicate that the
stereotyped class should be visible outside the Domain
package. &#171;interface&#187; is used for another purpose in UML; now
ColdFrame uses &#171;public&#187; instead. &#171;interface&#187; is
retained but deprecated (ie, it will disappear at some later time;
stop using it as soon as you can).


<p>The generated top-level Ada file contains identification
information:
<ul>

<li>revision control information for the domain (this is extracted
from a <tt>[[revision]]</tt> annotation for the domain, if any: to put
this in the Rose model in the correct place, select the domain Package
in the browser)

<li>date and time of extraction

<li>the ColdFrame releases (in the form <tt>cf-<i>yyyymmdd</i></tt>)
of the extractor, normalizer and generator components of ColdFrame
used.

</ul>


<p>In Rose, you can extract more than one Domain at once by
<ul>

<li>having a class diagram showing the Domain packages to be
extracted, and making it the active diagram

<li>selecting more than one Domain package in the Rose browser (or the
extraction diagram).

</ul>


<p>There is no longer an extraction dialog:
<ul>

<li>the extracted file name is formed from the package name, with
spaces replaced by underscores

<li>the extraction directory is that specified by the Rose Path Map
variable <tt>ColdFrameOut</tt> or, if not specified, the current
directory.

</ul>


<p>The extracted code is laid out using GNAT's defaults (standard
indentation 3 spaces, continuations 2 spaces). These can be
overridden.


<p>

<dt>20010707

<dd>Generate the <tt>Link</tt> operation for 1-(1:1) associations correctly.


<p>Work round a GNAT problem (tasks and <tt>with type</tt> don't mix).


<p>Work round a GNAT problem (<tt>with type</tt> in the spec needs to
be matched with a plain <tt>with</tt> in the body).


<p>If the Saxon command line parameter <tt>generate-accessors</tt> is
set to <tt>defined</tt>, attribute accessor subprograms will be
generated if they were specified in the Rose model. Corresponding task
entries for active classes are suppressed.<br>

For an attribute <tt><i>Attr</i></tt>, an operation is a "set"
accessor if it is a non-&#171;class&#187; procedure named
<tt>Set_<i>Attr</i></tt> with a single parameter of the same type as
<tt><i>Attr</i></tt>, and an operation is a "get" accessor if it is a
non-&#171;class&#187; function named <tt>Get_<i>Attr</i></tt> with no
parameters returning a value of the same type as <tt><i>Attr</i></tt>.


<p>Generate short names (omit Domain name and own Class name), where
possible. This is because of GNAT 3.14a1 problems with complex
separates.


<p>

<dt>20010623

<dd>Operations can be stereotyped as "access to subprogram" (and, by
implication, as &#171;class&#187; operations) using
&#171;access&#187;. This was actually present but undocumented in
20010520.


<p>Allow types to be <tt>[[imported]]</tt>.


<p>Partitioned inheritance trees were not being distinguished
properly.


<p>Support "autonumber" attributes.


<p>Domain types are generated in (reverse) dependency order, so you
can safely specify records containing records.


<p>1-(1:1), 1-(1:1c), 1-(1c:1c) associations now supported.


<p>Operations are generated with "separate" bodies, instead of using
child subprogram units.


<p>Active classes (in Rose, go to the Class/Detail tab and select
Active) are generated with a task for each instance. The task body is
"separate". Each non-&#171;class&#187; procedure operation has a
matching entry; the generated (separate) procedure body calls the task
entry.


<p>Singleton (but not Interface) classes now provide a <tt>Handle</tt>
type (accessed through the <tt>Find</tt> function), for use in
associations.


<p>All Classes have a &#171;class&#187; operation <tt>Initialize</tt>
(no parameters); the Domain has an Initialize operation which calls
each of the Class' Initialize (in alphabetical order).


<p>If the Saxon command line parameter <tt>generate-accessors</tt>
isn't set to <tt>yes</tt>, attribute accessor subprograms won't be
generated.


<p>The Makefiles set the file protection on generated code to
read-only (to give you some sort of warning when you accidentally edit
generated code).


<p>Include proper default initialization for Date/Time.


<p>Dispatching operations supported, including &#171;abstract&#187;
operations.


<p>Associations with &#171;singleton&#187;s now supported.


<p>

<dt>20010520

<dd>Includes support for Associations.


<p>Generates HTML documentation.


<p>Supports record &#171;type&#187;s (no check yet that record types
are declared after record types that they reference).


<p>Provides a callback facility (the Observer pattern).


<p>Allows the use of a class' Cardinality instead of <tt>[[max]]</tt>
or &#171;singleton&#187;.


<p>

<dt>20010325

<dd>Whether a class is a singleton or not is now determined by the
&#171;singleton&#187; stereotype (or annotation).


<p>All classes except those with the &#171;interface&#187; stereotype
or annotation are implemented as private
children. &#171;interface&#187; classes are automatically
&#171;singleton&#187;s.


<p>If a class is implemented using Bounded containers (because the
number of instances is known), a fixed-size storage pool is used for
the Handle access type (so that memory is only allocated from the
heap at package elaboration). This has forced the
<tt>Abstract_Containers</tt> package to be implemented as a child of
the <tt><i>Domain.Class</i></tt> package.


<p>References are implemented using the <tt>Handle</tt> of the
referenced class. This means we have to use the GNAT "with type"
extension.

<br>I've included a <tt>pragma Extensions_Allowed (On);</tt> in each
package that needs it, but there seems to be a GNAT problem here
(3.13p, 3.14a) so you may need to include this in your configuration
file (<tt>gnat.adc</tt>) or use the <tt>-gnatX</tt> flag.


<p>The child class enumeration literals now have <tt>_T</tt> appended
(otherwise the literals masked the class package, so you had to say
<tt><i>Domain.Class</i>.thing</tt> rather than just
<tt><i>Class</i>.thing</tt> in subprogram bodies).


<p><tt>Delete</tt> operations didn't in fact free allocated memory.


<p>You need at least Release 20010325 of the <a
href="http://www.pushface.org/components/bc/">Booch Components</a>.


<p>

<dt>20010228

<dd>Choose between Bounded and Unbounded Containers depending on the
class' <tt>[[ max: <i>max-size</i> ]]</tt> documentation annotation.

<p>Choose the number of hash buckets for Bounded Maps depending on the
<tt>[[ max: <i>max-size</i> ]]</tt> documentation annotation.

<p>Added documentation on the paraphernalia surrounding an Identified
Class Package.

<p>

<dt>20010204

<dd>Added support for singleton classes (classes with no Identifier
attributes).

<p>Added documentation of the relationship between the normalized
ColdFrame metamodel and generated Ada.

<p>

<dt>20010130

<dd>Initial release.

</dl>

<hr>
<i>
<address>
<a href="mailto:simon@pushface.org">Simon Wright</a>
</address>
<script>
document.write("Last update: ");
document.write(document.lastModified);
</script>
</i></body>
</html>