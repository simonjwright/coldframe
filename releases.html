<!-- $Id: releases.html,v f13e500a2c2a 2002/05/29 18:47:01 simon $ -->
<html>
<head>
<title>ColdFrame: Releases</title>
</head>
<body bgcolor="#ffffff">
<h1>ColdFrame: Releases</h1>

<hr>

<i>I removed the Mind-It facility, they've decided to <a
href="http://www.pumatech.com/mind-it_service/service.html">charge for
the service</a>.</i>

<hr>

<p>Source can be downloaded <a href="download/">here</a>.

<p>Archives are available in <tt>.zip</tt> or <tt>.tgz</tt>
(<tt>.tar.gz</tt>) form. The file name encodes the date of the
release: <tt>cf-20010130.zip</tt> is the zipped release of 30 January
2001.

<dl>

<p><dt>2002mmdd

<dd>&#171;instantiation&#187; can be used to mark operations which you
want to appear on a sequence diagram but which will be implemented by
instantiating a generic (for example,
<tt><i>Class</i>.Selection_Function</tt>).


<p>The <tt>[[set]]</tt> annotation (defining a type consisting of a
collection of instances of a class) is no longer available; I couldn't
find a sensible mechanism to implement it now that I don't use <i>WITH
TYPE</i> any more.


<p>Autonumbering is reset by <tt>Teardown</tt>.


<p>Initial support for state machines.


<p>Added <tt>pragma Elaborate_Body</tt> for generated instantiable
units.


<p>Navigation of associations from collections is now in a separate
child package <tt><i>Domain.Association</i>.From_Collections</tt>.


<p>Association navigation no longer relies on instantiating generics
(the code is generated explicitly).


<p>Include "don't edit" warnings in generated code.


<p>Include <a href="installation.html">installation notes</a>.


<p>It's no longer necessary to mess with your CLASSPATH to include
<tt>saxon.jar</tt>; <i>java</i>'s called with <tt>-cp</tt>. You do
need to unpack Saxon where the <tt>Makefile</tt>'s expecting it (see
the <a href="installation.html">installation notes</a>).


<p>Support &#171;class&#187; attributes.


<p>Added <i>Counterparts</i>.


<p>Projects will want to provide their own versions of supporting Ada
packages, for example to provide the default storage pool; but
ColdFrame needs to know how to <tt>with</tt> them.

<br>A new package hierarchy rooted at <tt>ColdFrame.Project</tt> is
used to hold such packages.

<br>A new Ada source library directory
<tt>cf-<i>yyyymmdd</i>/project</tt> is provided to hold example
versions of required packages.


<p>Added special processing where an dispatching or inherited
operation has a parmeter of the same type as its class; the parameter
is converted to the same type as the implicit <tt>This</tt> parameter.

<br>This may be what's called <i>covariance</i> in Eiffel.


<p>Create the default "abbreviation" for single-word classes by
prepending <tt>A</tt> or <tt>An</tt> to the class name.


<p>Check for illegal characters in identifiers.


<p>Tear-down of an active non-singleton instance didn't terminate the
associated task.


<p>Some of the generated operations (eg, some accessors for
referential attributes) are only intended to be called by generated
code. These are now marked in the spec.


<p>&#171;access&#187; functions were generated as though they were
procedures.


<p>ColdFrame now respects the modeller's casing; if you say
<i>FOO</i> it should come out as <tt>FOO</tt> (in the absence of a
case exception for <i>foo</i>).

<br>This change has two consequences:

<ul>

<li>you need to be consistent about case; the code generator is
case-sensitive

<li>you need to use the case that ColdFrame expects (for example,
<tt>AutoNumber</tt> won't work).
</ul>


<p>The exceptions declared in <tt>ColdFrame.Exceptions</tt> are no
longer renamings of Booch exceptions.


<p>There's a new exception
<tt>ColdFrame.Exceptions.Existing_Child</tt>, raised when you create a
child of a parent which already has one.


<p>Operations of &#171;type&#187;s are generated.

<br>This allows you to have domain-wide &#171;access&#187; operations,
too: declare them as operations of some &#171;type&#187; (if there are
no other <tt>[[annotations]]</tt>, attributes or operations the
&#171;type&#187; itself won't be generated).


<p>As well as setting Events that you want to be delivered at some
future time on Timers, which allows you to retract the event (by
unsetting the timer), you can just Post them (in a "fire and forget"
way).


<p>Event-related exceptions have been moved to
<tt>ColdFrame.Exceptions</tt> (with the rest).


<p>The generated bodies of functions that return composite (record)
types now compile.


<p><tt><tt>Create</tt> operations <tt>Assert</tt> that any identifying
referential attributes aren't <tt>null</tt>.

<br>Link</tt> operations <tt>Assert</tt> that their argumnets aren't
<tt>null</tt>.


<p><dt>20020116

<dd>&#171;abstract&#187; is supported on Classes (nothing is done with
it yet).


<p>The supplied <tt>Makefile</tt>s assume there's a case exceptions
file (<tt>~/.emacs_case_exceptions</tt>); normalization no longer
fails if there isn't one.


<p>Normalization no longer checks that the parent in an inheritance
relationship has an identifier (if it hasn't, that will be found later
anyway). This means it's no longer a fluke if inheritance trees work
properly!


<p>The Rose Extractor only extracts (selected) packages in the current
class diagram; it pops up a dialog box on completion to say what it's
done.


<p>Reports of unhandled stereotypes, annotations tidied up.


<p>The domain package comments include the generated lines-of-code
count (actually, the usual Ada "number of semicolons").


<p>Normally ColdFrame only extracts classes and associations from the
top-level (domain) package. If you prefer to organize your model with,
say, the &#171;type&#187;s in a "Types" child package, mark it with
&#171;generate&#187;.


<p><dt>20011209

<dd>There's a new scheme for mutual visibility of Class package specs,
<em>not</em> involving the GNAT <i>WITH TYPE</i> extension.


<p>In multiple inheritance, an inherited operation is called in the
correct parent.


<p>&#171;abstract&#187; and &#171;finalize&#187; operations don't map
to task entries.


<p>A new operation stereotype &#171;navigation&#187; is like
&#171;generated&#187; (but is intended to mark operations that are in
fact provided in an association package).


<p>&#171;finalize&#187; operations aren't inherited.


<p>The domain <tt>Tear_Down</tt> clears all registered Callbacks.


<p>A proper error message is given when a <tt>[[callback]]</tt>
annotation is given on a non-record type (a type without attributes).


<p>Implement the <tt>[[renames]]</tt> annotation.


<p>Sort out multiplicities (on roles) and cardinalities (on classes).


<p>Implement <i>Autonumber</i> using GNAT's <tt>Long_Long_Integer</tt>
(64 bits). Let's see you overflow <em>that</em>!


<p><dt>20011011

<dd>To support testing with <a
href="http://www.adapower.com/reuse/aunit.html">AUnit</a>, a
<tt>Tear_Down</tt> child procedure is generated for each Class, which
deletes all instances. This <em>won't</em> (31.viii.01) work for
&#171;active&#187; classes.

<br>A domain <tt>Tear_Down</tt> child procedure is also generated,
which calls all the class <tt>Tear_Down</tt>s.


<p><tt>normalize-rose.tcl</tt> supports the
<tt>--casing&nbsp;<i>file</i></tt> flag, which specifies a file
containing identifier case exceptions.

<br>A GLIDE case exception file can be used, but GLIDE's distinction
between partial and complete exceptions isn't preserved (you could
tell GLIDE to upcase <i>gnat</i> only when it formed the whole of an
identifier, so you'd get <tt>GNAT</tt> but <tt>Gnat_Id</tt>).

<br>You can specify more than one exception file by repeating
<tt>--casing</tt>.


<p>A child class's <tt>Create</tt> operation sets up the parents'
child information record.


<p>Deletion of an instance of a child class clears the parent's (or
parents') child information record(s).


<p>Deletion of an instance of a parent class deletes the current child
instance.


<p>A parameterless instance procedure marked &#171;finalize&#187; is
called by <tt>Delete</tt> just before the instance is freed.


<p>Operations marked &#171;generated&#187; are treated as "already
generated", that is, no new code is generated for them.

<br>This is to allow the standard <tt>Create</tt>, <tt>Find</tt> and
<tt>Delete</tt> operations to be used on sequence diagrams without
Rose complaining.


<p>The supplied Makefiles, when placing generated code in
<tt><i>Domain</i>.gen</tt>, delete any <tt>.ad?</tt> files which are
already present in <tt><i>Domain</i>.impl</tt>. This should reduce
confusion (and may make the use of GNAT Projects easier).


<p>(Record) types marked <tt>[[discriminated]]</tt> are generated as
discriminated records; the discriminant is an enumeration type with
literals formed from the attribute names with <tt>_T</tt> appended.


<p>A child generic procedure <tt><i>Domain.Class</i>.Iterate</tt> is
created for non-&#171;singleton&#187; classes to simplify iteration
over Collections.


<p>Storage management for the Booch Containers, where relevant, adopts
the new style (you need a version of the BCs later than 20010927).


<p>Generated <tt>Hash</tt> functions now compute a useful (I hope)
value.


<p>The supporting code for hash functions has been reorganised under
<tt>ColdFrame.Hash</tt>.


<p>Generated package specs and bodies have added blank lines to make
them easier to read. This is controlled by the Make variable
<tt>BLANK_LINES</tt> (<tt>yes</tt> means "add blank lines", anything
else means "don't").


<p>Verbosity is controlled by the Make variable <tt>VERBOSE</tt>;
<tt>yes</tt> means "be chatty", anything else means "don't".


<p><dt>20010819

<dd>The Domain <tt>Initialize</tt> procedure used to call an
<tt>Initialize</tt> procedure for each Class, for which a default
empty implementation was supplied. Now, it only calls operations with
the &#171;init&#187; stereotype (&#171;init&#187; implies
&#171;class&#187;). They should be parameterless procedures (a warning
is given, but code generation completes); a standard stub
implementation is provided, which raises <tt>Program_Error</tt>.


<p>ColdFrame used to use &#171;interface&#187; to indicate that the
stereotyped class should be visible outside the Domain
package. &#171;interface&#187; is used for another purpose in UML; now
ColdFrame uses &#171;public&#187; instead. &#171;interface&#187; is
retained but deprecated (ie, it will disappear at some later time;
stop using it as soon as you can).


<p>The generated top-level Ada file contains identification
information:
<ul>

<li>revision control information for the domain (this is extracted
from a <tt>[[revision]]</tt> annotation for the domain, if any: to put
this in the Rose model in the correct place, select the domain Package
in the browser)

<li>date and time of extraction

<li>the ColdFrame releases (in the form <tt>cf-<i>yyyymmdd</i></tt>)
of the extractor, normalizer and generator components of ColdFrame
used.

</ul>


<p>In Rose, you can extract more than one Domain at once by
<ul>

<li>having a class diagram showing the Domain packages to be
extracted, and making it the active diagram

<li>selecting more than one Domain package in the Rose browser (or the
extraction diagram).

</ul>


<p>There is no longer an extraction dialog:
<ul>

<li>the extracted file name is formed from the package name, with
spaces replaced by underscores

<li>the extraction directory is that specified by the Rose Path Map
variable <tt>ColdFrameOut</tt> or, if not specified, the current
directory.

</ul>


<p>The extracted code is laid out using GNAT's defaults (standard
indentation 3 spaces, continuations 2 spaces). These can be
overridden.


<p><dt>20010707

<dd>Generate the <tt>Link</tt> operation for 1-(1:1) associations correctly.


<p>Work round a GNAT problem (tasks and <tt>with type</tt> don't mix).


<p>Work round a GNAT problem (<tt>with type</tt> in the spec needs to
be matched with a plain <tt>with</tt> in the body).


<p>If the Saxon command line parameter <tt>generate-accessors</tt> is
set to <tt>defined</tt>, attribute accessor subprograms will be
generated if they were specified in the Rose model. Corresponding task
entries for active classes are suppressed.<br>

For an attribute <tt><i>Attr</i></tt>, an operation is a "set"
accessor if it is a non-&#171;class&#187; procedure named
<tt>Set_<i>Attr</i></tt> with a single parameter of the same type as
<tt><i>Attr</i></tt>, and an operation is a "get" accessor if it is a
non-&#171;class&#187; function named <tt>Get_<i>Attr</i></tt> with no
parameters returning a value of the same type as <tt><i>Attr</i></tt>.


<p>Generate short names (omit Domain name and own Class name), where
possible. This is because of GNAT 3.14a1 problems with complex
separates.


<p><dt>20010623

<dd>Operations can be stereotyped as "access to subprogram" (and, by
implication, as &#171;class&#187; operations) using
&#171;access&#187;. This was actually present but undocumented in
20010520.


<p>Allow types to be <tt>[[imported]]</tt>.


<p>Partitioned inheritance trees were not being distinguished
properly.


<p>Support "autonumber" attributes.


<p>Domain types are generated in (reverse) dependency order, so you
can safely specify records containing records.


<p>1-(1:1), 1-(1:1c), 1-(1c:1c) associations now supported.


<p>Operations are generated with "separate" bodies, instead of using
child subprogram units.


<p>Active classes (in Rose, go to the Class/Detail tab and select
Active) are generated with a task for each instance. The task body is
"separate". Each non-&#171;class&#187; procedure operation has a
matching entry; the generated (separate) procedure body calls the task
entry.


<p>Singleton (but not Interface) classes now provide a <tt>Handle</tt>
type (accessed through the <tt>Find</tt> function), for use in
associations.


<p>All Classes have a &#171;class&#187; operation <tt>Initialize</tt>
(no parameters); the Domain has an Initialize operation which calls
each of the Class' Initialize (in alphabetical order).


<p>If the Saxon command line parameter <tt>generate-accessors</tt>
isn't set to <tt>yes</tt>, attribute accessor subprograms won't be
generated.


<p>The Makefiles set the file protection on generated code to
read-only (to give you some sort of warning when you accidentally edit
generated code).


<p>Include proper default initialization for Date/Time.


<p>Dispatching operations supported, including &#171;abstract&#187;
operations.


<p>Associations with &#171;singleton&#187;s now supported.


<p><dt>20010520

<dd>Includes support for Associations.


<p>Generates HTML documentation.


<p>Supports record &#171;type&#187;s (no check yet that record types
are declared after record types that they reference).


<p>Provides a callback facility (the Observer pattern).


<p>Allows the use of a class' Cardinality instead of <tt>[[max]]</tt>
or &#171;singleton&#187;.


<p><dt>20010325

<dd>Whether a class is a singleton or not is now determined by the
&#171;singleton&#187; stereotype (or annotation).


<p>All classes except those with the &#171;interface&#187; stereotype
or annotation are implemented as private
children. &#171;interface&#187; classes are automatically
&#171;singleton&#187;s.


<p>If a class is implemented using Bounded containers (because the
number of instances is known), a fixed-size storage pool is used for
the Handle access type (so that memory is only allocated from the
heap at package elaboration). This has forced the
<tt>Abstract_Containers</tt> package to be implemented as a child of
the <tt><i>Domain.Class</i></tt> package.


<p>References are implemented using the <tt>Handle</tt> of the
referenced class. This means we have to use the GNAT "with type"
extension.

<br>I've included a <tt>pragma Extensions_Allowed (On);</tt> in each
package that needs it, but there seems to be a GNAT problem here
(3.13p, 3.14a) so you may need to include this in your configuration
file (<tt>gnat.adc</tt>) or use the <tt>-gnatX</tt> flag.


<p>The child class enumeration literals now have <tt>_T</tt> appended
(otherwise the literals masked the class package, so you had to say
<tt><i>Domain.Class</i>.thing</tt> rather than just
<tt><i>Class</i>.thing</tt> in subprogram bodies).


<p><tt>Delete</tt> operations didn't in fact free allocated memory.


<p>You need at least Release 20010325 of the <a
href="http://www.pushface.org/components/bc/">Booch Components</a>.


<p><dt>20010228

<dd>Choose between Bounded and Unbounded Containers depending on the
class' <tt>[[ max: <i>max-size</i> ]]</tt> documentation annotation.

<p>Choose the number of hash buckets for Bounded Maps depending on the
<tt>[[ max: <i>max-size</i> ]]</tt> documentation annotation.

<p>Added documentation on the paraphernalia surrounding an Identified
Class Package.

<p><dt>20010204

<dd>Added support for singleton classes (classes with no Identifier
attributes).

<p>Added documentation of the relationship between the normalized
ColdFrame metamodel and generated Ada.

<p><dt>20010130

<dd>Initial release.

</dl>

<hr>
<i>
<address>
<a href="mailto:simon@pushface.org">Simon Wright</a>
</address>
<script>
document.write("Last update: ");
document.write(document.lastModified);
</script>
</i></body>
</html>