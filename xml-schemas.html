<!-- $Id: xml-schemas.html,v d88e9b41b3ec 2005/05/08 11:28:14 simonjwright $ -->
<head>
<title>ColdFrame: XML Schemas</title>
</head>
<body bgcolor="white">

<table width="100%">
<tr>
<td><font size="+3">ColdFrame: XML Schemas</font>
<td align="right"><a href="http://sourceforge.net"> <img
src="http://sourceforge.net/sflogo.php?group_id=95861&amp;type=5"
width="210" height="62" border="0" alt="SourceForge.net Logo" /></a>
</tr>
</table>

<p>There are currently (12.vi.04) two XML file formats (schemas) used:

<ul>

<li>the <tt>.raw</tt> format used for extraction from Rose; schema in
<a href="ColdFrame-raw.xsd">ColdFrame-raw.xsd</a>.

<li>the <tt>.norm</tt> format used as input to the XSLT stylesheets
for code generation, schema in <a
href="ColdFrame-norm.xsd">ColdFrame-norm.xsd</a>.

</ul>

<h2>Validation</h2>

<p>The tool I used was <a
href="http://www.ltg.ed.ac.uk/~ht/xsv-status.html">XSV</a>, an XML
Schema Validator.

<p>Installing it on this Mandrake 8.2 machine (dual-processor Celeron)
involved several stages, as described here.

<h3>Python</h3>

<p>Mandrake comes with a Python 2.2 that can't install PyLTXML. I
downloaded and installed Python 2.2.3 from <a
href="http://www.python.org/2.2.3/"><i>python.org</i></a> (to avoid
possible grief, I used <tt>--prefix=/opt/local</tt>;
<tt>/opt/local/bin</tt> is early on <i>my</i> path).

<h3>PyLTXML</h3>

Get this from <a
href="http://www.ltg.ed.ac.uk/software/xml/">here</a>. You fill in a
form to tell the developers something about who you are and sign up
for their mailing list (or not): the site sends you the download URL
by return (well, on the second try for me!)

<p>You need to download both PyLTXML (I got version 1.3) and LT XML (I
got version 1.2.6).

<p>First install LT XML; follow the instructions in
<tt>ltxml-1.2.6/00INSTALL</tt>, I used the default install point
(<tt>/usr/local</tt>).

<p>Then install PyLTXML, following the instructions in
<tt>PyLTXML-1.3/00INSTALL</tt>; it installs inside your Python
installation.

<h3>XSV</h3>

<p>I downloaded the sources from the <a
href="http://dev.w3.org/cvsweb/xmlschema/XSV/">W3C public CVS
repository</a>, following the <a
href="http://dev.w3.org/cvsweb/">instructions</a>; I checked out the
whole <tt>xmlschema</tt> by
<pre>
   $ cd
   $ CVSROOT=:pserver:anonymous@dev.w3.org:/sources/public cvs login
   anonymous
   $ CVSROOT=:pserver:anonymous@dev.w3.org:/sources/public cvs checkout xmlschema
</pre>

<h3>Using XSV</h3>


<p>The tool didn't run properly from the command line, even by making
<tt>commandLine.py</tt> executable; so to validate say
<tt>States.norm</tt> say
<pre>
   $ PYTHONPATH=~/xmlschema python ~/xmlschema/XSV/commandLine.py States.norm ColdFrame-norm.xsd
</pre>

<p>The rather inscrutable output of a successful validation is like <a
href="States-check.xsv">this</a>.
<br><i>Well, actually I think this is wrong, because you get the same
sort of output no matter what sort of actual document you supply!</i>

<p>To convert the output to HTML, you need to process the above output
(which is to standard error):
<pre>
   $ PYTHONPATH=~/xmlschema python ~/xmlschema/XSV/commandLine.py States.norm ColdFrame-norm.xsd \
     2>work.xsv
   $ java -cp /usr/local/lib/saxon/saxon.jar com.icl.saxon.StyleSheet \
     work.xsv ~/xmlschema/xsv.xsl >States-check.html
</pre>

<p>which resulted in <a href="States-check.html">this</a>.


<p><hr>
<i>
<address>
<a href="mailto:simon@pushface.org">Simon Wright</a>
</address>
<script>
document.write("Last update: ");
document.write(document.lastModified);
</script>
</i></body>
</html>
